<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${product.id != null} ? 'Редактирование продукта' : 'Создание продукта'">MotoShop Admin</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    .header { background: #343a40; color: white; padding: 1rem; }
    .container { padding: 1rem; max-width: 800px; margin: 0 auto; }
    .form-group { margin-bottom: 1rem; }
    label { display: block; margin-bottom: 0.5rem; }
    input, select, textarea { width: 100%; padding: 0.5rem; border: 1px solid #ddd; }
    .btn { padding: 0.5rem 1rem; text-decoration: none; border: none; border-radius: 3px; cursor: pointer; }
    .btn-success { background: #28a745; color: white; }
    .btn-secondary { background: #6c757d; color: white; }
  </style>
</head>
<body>
<div th:replace="fragments/header :: simple-header"></div>

<div class="container">
  <div style="background: white; padding: 1rem; border: 1px solid #ddd;">
    <h2 th:text="${product.id != null} ? 'Редактирование продукта' : 'Создание нового продукта'"></h2>

    <form th:action="@{/admin/products/save}" th:object="${product}" method="post">
      <input type="hidden" th:field="*{id}">

      <div class="form-group">
        <label>Название продукта</label>
        <input type="text" th:field="*{name}" required>
      </div>

      <div class="form-group">
        <label>Описание</label>
        <textarea th:field="*{description}" rows="3"></textarea>
      </div>

      <div class="form-group">
        <label>Цена</label>
        <input type="number" step="0.01" th:field="*{price}" required>
      </div>

      <div class="form-group">
        <label>Количество на складе</label>
        <input type="number" th:field="*{stockQuantity}" required>
      </div>

      <div class="form-group">
        <label>Категория</label>
        <select th:field="*{category}">
          <option th:each="category : ${categories}"
                  th:value="${category.id}"
                  th:text="${category.name}"
                  th:selected="${product.category != null and product.category.id == category.id}">
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Бренд</label>
        <input type="text" th:field="*{brand}">
      </div>

      <div class="form-group">
        <label>Модель</label>
        <input type="text" th:field="*{model}">
      </div>

      <div class="form-group">
        <label>URL изображения</label>
        <input type="text" th:field="*{imageUrl}">
      </div>

      <div class="form-group">
        <label>
          <input type="checkbox" th:field="*{available}">
          Доступен для покупки
        </label>
      </div>

      <div style="display: flex; gap: 10px;">
        <button type="submit" class="btn btn-success">Сохранить</button>
        <a th:href="@{/admin/products}" class="btn btn-secondary">Отмена</a>
      </div>
    </form>
  </div>
</div>
</body>
</html>